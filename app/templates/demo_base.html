<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ client_name }} - Support</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --primary-color: {{ config.primary_color }}; }
        .bg-brand { background-color: var(--primary-color); }
        .text-brand { color: var(--primary-color); }
    </style>
</head>
<body class="bg-gray-50 h-screen flex flex-col">

    <nav class="bg-white shadow-sm p-4 flex justify-between items-center">
        <div class="font-bold text-xl">{{ client_name }}</div>
        <a href="#" class="text-sm text-gray-500 hover:text-brand">Contact Support</a>
    </nav>

    <div class="flex-1 flex flex-col items-center justify-center text-center p-4">
        <h1 class="text-4xl font-bold text-gray-900 mb-4">Welcome to {{ client_name }}</h1>
        <p class="text-gray-600 max-w-md mb-8">{{ config.welcome_message }}</p>
        
        <div class="p-4 bg-blue-50 border border-blue-100 rounded-lg text-sm text-blue-800">
            <p><strong>Demo Mode:</strong> The chat widget should appear in the bottom right.</p>
        </div>
    </div>

    {% if config.ema_tenant_id and config.ema_project_id %}
    <script>
        (function (window, document, scriptTag, objectName, scriptSrc, scriptElement, firstScriptTag) {
          window[objectName] = function () {
            (window[objectName].q = window[objectName].q || []).push(arguments)
          }
          scriptElement = document.createElement(scriptTag)
          firstScriptTag = document.getElementsByTagName(scriptTag)[0];
          scriptElement.id = "EmaChat";
          scriptElement.src = scriptSrc;
          scriptElement.async = 1;
          scriptElement.type = "module";
          firstScriptTag.parentNode.insertBefore(scriptElement, firstScriptTag);
        })(window, document, "script", "EmaChat", "https://chatbot.ema.co/sdk/widget.js");
      
        window.EmaChat("init", {
            "tenantId": "{{ config.ema_tenant_id }}",
            "projectId": "{{ config.ema_project_id }}",
            "personaId": "{{ config.ema_persona_id }}",
            "isCWBMode": false,
            "useCWBMode": false,
            "mode": "auto",
            "configuration": {
                "defaultOpen": false,
                "showPoweredBy": true,
                "primaryColor": "{{ config.primary_color }}" 
            }
        });
    </script>
    {% else %}
    <script>console.warn("Lumina: EmaChat not configured for this tenant.");</script>
    {% endif %}

</body>
</html>